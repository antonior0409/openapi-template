name: clean-up
run-name: Repository init clean up

on:
  create:

concurrency:
  group: clean-up
  cancel-in-progress: true

jobs:
  clean-up:
    if: github.run_number == 1

    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Remove unneeded files
        run: rm -r -f .github

      - name: Commit changes
        run: |
          git commit -m "Init clean up"
          git remote set-url origin https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/${{ github.repository }}
          git push
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
